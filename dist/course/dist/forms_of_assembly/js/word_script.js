var jsonDom = {
	"name" : "gig economy" , "children" : [

		{
			"name":"economic trends",
			"children":[{
				"name":"Valerio De Stefano",
				"children":[
					{"name":"casualization of the workforce"},
					{"name":"informalization of the formal economy"},
					{"name":"demutualization of risk"},
				]

			}]

		},

		{"name":"capitalism",
		"children":[
			{
				"name":"GDP",
				"children":[
					{"name":"price"},
					{"name":"unrecognized work of woman"},
					{"name":"social reproduction"},
					{"name":"linear progressive logic of economy"},
				]
			}
		]},
		{"name":"constituencies",
		"children":[
			{"name":"technology",
				"children":[
					{"name":"platform",
						"children":[
							{"name":"Uber",
							"children":[
								{"name":"Austin Zwick",
								"children":[
									{"name":"(mis)classifying workers"},
									{"name":"engaging in regime shopping"},
									{"name":"employing the most economically vulnerable"},
								]}
							]},
							{"name":"lyft"},
							{"name":"Apple podcast"},
							{"name":"Airbnb"},
							{"name":"Pornhub"},
							{"name":"DoorDash"},
							{"name":"Ele"},
							{"name":"Meituan"},
							{"name":"FlipKey"},
							{"name":"Care"},
							{"name":"Soothe"},
							{"name":"Urbansitter"},
							{"name":"Amazon Flex"},
							{"name":"Amazon Turf"},
							{"name":"Cargomatic"},
							{"name":"Deliv"},
							{"name":"Dunzo"},
							{"name":"eCourier"},
							{"name":"Instacart"},
							{"name":"InnoCentive"},
							{"name":"Upwork"},
							{"name":"Catalant"},
							{"name":"Kaggle"},

						]}
				]},
			{"name":"activists"},
			{"name":"journalists"},
			{"name":"policymakers"},
			{"name":"customers"},
			{"name":"workers",
			"children":[
				{"name":"taxi"},
				{"name":"pornography"},
				{"name":"podcaster"},
				{"name":"blogger"},
				{"name":"airbnb"},
				{"name":"food delivery"},
				{"name":""},
				{"name":""},
				{"name":""},
				{"name":""},
				{"name":""},
				{"name":""},


			]},


		]},
		{"name":""},
		{"name":""},
		{
		"name" : "management literature" , "children" : [{
			"name" : "media parlance" , "children" : [{
				"name" : "language and power",
				"children":[
					{"name":"language and power",
					"children":[
						{"name":"subjectivity",
						"children":[{"name":"Entrepreneurism",
							"children":[
								{"name":"self-promotion"},
								{"name":"passion"},
								{"name":"suitable mindset"},
								{"name":"nose for business"},
								{"name":"creativity"},
								{"name":"competitiveness"},

							]},
							{"name":"self-development",
								"children":[
									{"name":"urge-to-learn"},
									{"name":"proficiency"},
									{"name":"self-knowledge"},
									{"name":"self-leadership"},

								]},
							{"name":"malleability",
								"children":[
									{"name":"change capability"},
									{"name":"flexibility"},
									{"name":"adaptability"},
								]},
							{"name":"prudence",
								"children":[
									{"name":"decisiveness"},
									{"name":"self-discipline"},
									{"name":"preparedness"},
									{"name":"humbleness"},
									{"name":"thrift"},
									{"name":"responsibility"},

								]},
							{"name":"communicativeness",
								"children":[
									{"name":"people skills"},
									{"name":"communicativity"},
									{"name":"networking"},
								]},]}

					]},
				]},]
		},{
			"name" : "pop management" , "children" : [{
				"name" : "profit from the transformation of work" , "children" : [{
					"name" : "reconfiguration of th eworking life" ,
				}]
			}, {
			"name": "sentiment"}
					,{
				"name" : "exploitative aspects" ,
				"children" : [{"name" : "precarity"} ,
							{"name" : "eradication of collective bargaining power"},
							{"name" : "legal barriers"},
							{"name" : "shifting of economic responsibility"},
							{"name" : "asymmetry of risks and benefits"},
							{"name" : "gender-based discrimination",
								"children":[
									{"name":"ineligibility",
									"children":[
										{"name":"healthcare"},
										{"name":"retirement plan"},
										{"name":"overtime"},
										{"name":"paid leave"},
									]},
									{"name":"neoliberal policies",
									"children":[
										{"name":"welfare"},
										{"name":"affordable housing"},
										{"name":"medical stamp"},
										{"name":"food stamp"},

									]},
									{"name":"credit"},
									// {"name":""},
									// {"name":""},
									// {"name":""},
									// {"name":""},
									// {"name":""},
									// {"name":""},
									// {"name":""},
									// {"name":""},
									// {"name":""},
								]},
							{"name" : "race-based discrimination"},]
			}, {
				"name" : "produser" ,
						"children" :[{
							"name" : "community" ,
							"children" : [
								{"name" : "self-actualization"} ,
								{"name" : "audience maximization"},
								{"name" : "authenticity"},
								{"name" : "commitment"},
								{"name" : "relationship maintenance"},
								{"name" : "affective labor"}]}]
			},{
				"name" : "pro-ams" ,
			}, {
				"name" : "side-hustles" ,
			}, {
				"name" : "slasher" ,
			}, {
				"name" : "digital worker" ,
			}]
		}]
	} ,{
		"name":"arrangement",
		"children" : [{"name":"subjectivity",
						"children":[
							{"name":"hyper-individualized"},
							{"name":"entrepreneurial "},
						]},
						{"name":"ideological function",
							"children":[
								{"name":"intimate connections between language and power "},
							]},
						{"name":"work order",
							"children":[
								{"name":"deterioration of “regular work,” "},
								{"name":"novel “structures of feeling” "},
								{"name":"macro-scale restructuration of contemporary capitalism "},
								{"name":"digital realm"},
								{"name": "high efficiency"}
							]},
		]
	} ,{
		"name" : "digital cultural labor" ,
		"children" :[{
			"name" : "participatory creativity online" ,
			"children" : [
				{"name" : "cultural shift"},
				{"name" : "online distribution"},
				{"name" : "democratic information access"}]
		}, {
			"name" : "user-generated" ,
			"children" : [{"name" : "mass amateurization" , "children" : [{"name" : "utopian enthusiasm"} ]}]
		},{
			"name" : "reactionary populism" ,
			"children" : [{"name" : "populist politics of distribution" , "children" : [{"name" : "span"} , {"name" : "a"}]}]
		}] },{
		"name" :"entrepreneurial energy ",
		"children" :[{
			"name" : "formalization" ,
			"children" : [{"name":"professionalization"},
				{"name":"rationalized "},
				{"name":"consolidated "},
				{"name":"financially transparent"},
				{"name" : "social communities" , "children" : [{"name" : "normative social order "}]},
				{"name":"institutionalization of production practices "},
				{"name":"meritocracy", "children" : [
						{"name" : "monopoly of competence"},
						{"name" : "sanctioned ‘expertise’"},
						{"name" : "monopoly of credibility with the public"},
						{"name" : "algorithmic formula",
						"children":[
							{"name":"algorithmic oppression"},
							{"name": "technological redlining"}
						]},
						{"name" : "digital coordination"},
						{"name" : "recommendation system"},
						{"name" : "monopoly of credibility with the public"}]},]
		}]
	},
		{
		"name" : "progressive neoliberal hegemonic bloc" ,
		"children" : [{
			"name" : "liberal currents of social movement" ,
		}, {
			"name" : "high-end ‘symbolic’ and financial sectors" ,
		},{
			"name" : "reactionary populism" ,
			"children" : [{"name" : "populist politics of distribution" ,
				"children" : [{"name" : "progressive myth",
				"children":[
					{"name":"democratize travel"},
					{"name":""},
					{"name":""},
					{"name":""},
					{"name":""},
				]} ]
			}]
		}]
	}]
};

var diameter = 1000;

  		var tree = d3.layout
			.tree()
			.size([360, diameter / 3 - 100]);
			
		var diagonal = d3.svg
			.diagonal
			.radial()
			.projection(function(d) {
				return [d.y, d.x / 180 * Math.PI];
			});
		var rotate = d3.scale
			.linear()
			.domain([0, 1])
			.range([0, 359]);

		var col = d3.scale.category20c();

		var svg = d3.select('.svg-container')
			.append("svg").attr("width", 1000)
			.attr("height", diameter)
			.append("g")
			.attr("transform", "translate(" + 350 + "," + 275 + ")rotate(" + rotate(60) + ")");

			//d3.json(jsonDom, function(error, root) {
		var nodes = tree.nodes(jsonDom);
		var edges = tree.links(nodes);

		var link = svg.selectAll(".edge")
		.data(edges)
		.enter()
		.append("path")
		.attr("class", "edge")
		.attr("d", diagonal)
		.style("opacity", 0);

		var node = svg.selectAll(".node")
		.data(nodes)
		.enter()
		.append("g")
		.attr("class", "node");

		var yMax = d3.max(nodes, function(d) {
				return d.y
			});

		var radiusScale = d3.scale
		.linear()
		.domain([0, yMax])
		.range([4, 1]);

		node.on('mouseover', function(e) {
			var tag = this.textContent;
			var output = document.getElementById("tag");
			var x = d3.select(this).data()[0].x;
			var y = d3.select(this).data()[0].y;

			output.innerHTML = tag;
			output.style.top = d3.event.layerY - 30 + "px";
			output.style.left = d3.event.layerX + 5 + "px";
			output.style.display = "block";
		}).on('mouseout', function() {
			var output = document.getElementById("tag");
			output.style.display = "none";
		});

		node.append("circle")
		.attr("r", function(d) {
			return (radiusScale(d.y));
		}).style("fill", function(d) {
			return col(d.name);
		});

		node.transition()
		.duration(2000)
		.attr("transform", function(d) {
			return "rotate(" + (d.x - 90) + ")translate(" + d.y + ")";
		});

		node.append("text")
		.text(function(d) {
			return d.name;
		}).style({
			"fill" : "#fff",
			"opacity" : "0"
		});

			svg.selectAll('.edge')
			.transition()
			.duration(2500)
			.delay(1500)
			.style("opacity", .8);