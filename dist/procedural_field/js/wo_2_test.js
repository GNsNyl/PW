let tx1,tx2,tx3,ty1,ty2,ty3,tx4,ty4,tx5,ty5,tx6,ty6,wc,width=900,height=900,layer=10,rotation=0;const a0=15;function setup(){let t=createCanvas(width,height);t.parent("drawing-container"),pixelDensity(1),wc=color(255,255,255)}function draw(){background("rgb(0,0,0)"),tx1=width/2,ty1=height/3,ty2=Math.floor(((tx2=2*width/3)-tx1)*Math.sqrt(3)+ty1),tx5=-100,tx6=width*(7/9),ty6=(ty2-ty1)/4+ty1;for(let t=0;t<layer;t++)wc.setAlpha(255*(1-Math.tan(Math.PI*t/4/layer))),ty1+=t,tx3=2*tx1-tx2,ty3=ty2=Math.floor((tx2-tx1)*Math.sqrt(3)+ty1),tx4=(tx1+tx3)/2,ty4=(ty2+ty1)/2,ty5=tx4*Math.tan(Math.PI/6)+ty1,drawTriangle(t,tx1,ty1,tx2,ty2,tx3,ty3,tx4,ty4,tx5,ty5,tx6-211,ty6,wc);canvasHueGradientA(tx6+9,ty6,100*(rotation+=.03),360+100*rotation)}function drawTriangle(t,$,_,e,n,y,a,r,i,x,o,l,c,h){noFill(),stroke(h),strokeWeight(3),triangle($,_,e,n,y,a),rotate(.002*Math.sin(rotation*PI)),line(r,i,x,o),strokeWeight(1),line(r,i,l,c)}function canvasHueGradientA(t,$,_,e){loadPixels();for(let n=t;n<width+200;n++)for(let y=$;y<height;y++){let a=calcAngleDegrees(n-t,y-$)-15;if(a>0&&a<=25){let r=a/25,i=_+r*(e-_),x=HSBToRGB([i,100,100,100]),o=4*(n+y*width);pixels[o]=x[0],pixels[o+1]=x[1],pixels[o+2]=x[2],pixels[o+3]=x[3]}}updatePixels()}function calcAngleDegrees(t,$){return 180*Math.atan2($,t)/Math.PI}